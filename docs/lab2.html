<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-01-05">

<title>432-2023 - Lab 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">432-2023</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./calendar.html">
 <span class="menu-text">Calendar</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./syllabus.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./notes.html">
 <span class="menu-text">Notes</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-labs" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Labs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-labs">    
        <li>
    <a class="dropdown-item" href="./lab1.html">
 <span class="dropdown-text">Lab 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab2.html">
 <span class="dropdown-text">Lab 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab3.html">
 <span class="dropdown-text">Lab 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab4.html">
 <span class="dropdown-text">Lab 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab5.html">
 <span class="dropdown-text">Lab 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab6.html">
 <span class="dropdown-text">Lab 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab7.html">
 <span class="dropdown-text">Lab 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lab8.html">
 <span class="dropdown-text">Lab 8</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="./projA.html">
 <span class="dropdown-text">Project A</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./projB.html">
 <span class="dropdown-text">Project B</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-quizzes" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Quizzes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-quizzes">    
        <li>
    <a class="dropdown-item" href="./quiz1.html">
 <span class="dropdown-text">Quiz 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./quiz2.html">
 <span class="dropdown-text">Quiz 2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/THOMASELOVE/432-data">
 <span class="menu-text">Data</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://campuswire.com/">
 <span class="menu-text">Campuswire</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://canvas.case.edu/">
 <span class="menu-text">Canvas</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contact.html">
 <span class="menu-text">Contact Us</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#general-instructions" id="toc-general-instructions" class="nav-link active" data-scroll-target="#general-instructions">General Instructions</a></li>
  <li><a href="#question-1-25-points" id="toc-question-1-25-points" class="nav-link" data-scroll-target="#question-1-25-points">Question 1 (25 points)</a>
  <ul class="collapse">
  <li><a href="#data-for-question-1" id="toc-data-for-question-1" class="nav-link" data-scroll-target="#data-for-question-1">Data for Question 1</a></li>
  <li><a href="#variables-studied-in-question-1" id="toc-variables-studied-in-question-1" class="nav-link" data-scroll-target="#variables-studied-in-question-1">Variables Studied in Question 1</a></li>
  <li><a href="#loading-the-question-1-data" id="toc-loading-the-question-1-data" class="nav-link" data-scroll-target="#loading-the-question-1-data">Loading the Question 1 Data</a></li>
  </ul></li>
  <li><a href="#question-2-25-points" id="toc-question-2-25-points" class="nav-link" data-scroll-target="#question-2-25-points">Question 2 (25 points)</a>
  <ul class="collapse">
  <li><a href="#question-2-hints" id="toc-question-2-hints" class="nav-link" data-scroll-target="#question-2-hints">Question 2 Hints</a></li>
  <li><a href="#data-for-question-2-hbp3456-data" id="toc-data-for-question-2-hbp3456-data" class="nav-link" data-scroll-target="#data-for-question-2-hbp3456-data">Data for Question 2 (<code>hbp3456</code> data)</a>
  <ul class="collapse">
  <li><a href="#eligibility-criteria" id="toc-eligibility-criteria" class="nav-link" data-scroll-target="#eligibility-criteria">Eligibility Criteria</a></li>
  <li><a href="#codebook" id="toc-codebook" class="nav-link" data-scroll-target="#codebook">Codebook</a></li>
  <li><a href="#notes-on-specific-variables" id="toc-notes-on-specific-variables" class="nav-link" data-scroll-target="#notes-on-specific-variables">Notes on Specific Variables</a></li>
  </ul></li>
  <li><a href="#loading-the-data-for-question-2" id="toc-loading-the-data-for-question-2" class="nav-link" data-scroll-target="#loading-the-data-for-question-2">Loading the Data for Question 2</a></li>
  </ul></li>
  <li><a href="#include-the-session-information" id="toc-include-the-session-information" class="nav-link" data-scroll-target="#include-the-session-information">Include the Session Information</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 2</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 5, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="general-instructions" class="level1">
<h1>General Instructions</h1>
<ul>
<li>Submit your work via <a href="https://canvas.case.edu/">Canvas</a>.</li>
<li>The deadline for this Lab is specified on the <a href="./calendar.html">Calendar</a>.
<ul>
<li>Work submitted late, but within 12 hours of the deadline will lose 5 of the available 50 points.</li>
<li>Work submitted more than 12 hours after the deadline will lose 10 of the available 50 points.</li>
</ul></li>
</ul>
<p>Your response should include a Quarto file (.qmd) and an HTML document that is the result of applying your Quarto file to the data we’ve provided.</p>
</section>
<section id="question-1-25-points" class="level1">
<h1>Question 1 (25 points)</h1>
<p>Question 1 uses the <code>lab2q1</code> data, based on NHANES 2017-18 results. You will use these data to generate two different responses to the question:</p>
<blockquote class="blockquote">
<p>Estimate the percentage of the US non-institutionalized adult population within the ages of 21-49 who engage in moderate-activity sports that would describe their General Health as either “Excellent” or “Very Good”.</p>
</blockquote>
<ol type="a">
<li><p>(10 points) What percentage of the subjects who responded “Yes” to the moderate-intensity sports question included in the <code>lab2q1</code> data have described their General Health as either “Excellent” or “Very Good”, among those who provided an answer to the General Health question? Be sure to use a <strong>complete-case</strong> analysis to deal with missing data on the General Health variable, and provide all of the R code you use to obtain your result, annotated with detailed text that makes it clear what you are doing as you proceed. Please express your final response as a percentage between 0 and 100, including a single decimal place.</p></li>
<li><p>(15 points) Please answer the question asked in Question 1a, again, but this time accounting for the sampling weights used in <code>wtint2yr</code>, again using a <strong>complete-case</strong> analysis to deal with missing General Health values. As you did in Question 1a, provide all of the R code you use to obtain your result, annotated with text to make it clear what you are doing, and then express your final response to Question 1b as a percentage, again including a single decimal place.</p></li>
</ol>
<section id="data-for-question-1" class="level2">
<h2 class="anchored" data-anchor-id="data-for-question-1">Data for Question 1</h2>
<p>Dr.&nbsp;Love created these data from NHANES 2017-18 Demographics and Questionnaire data, using the code below.</p>
<p>Specifically, he used the <code>DEMO_J</code> (Demographics) and <code>HSQ_J</code> (Current Health Status) files, which are described at <a href="https://wwwn.cdc.gov/nchs/nhanes/ContinuousNhanes/Default.aspx?BeginYear=2017">this link</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nhanesA)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>temp1 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'DEMO_J'</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>temp2 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'HSQ_J'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>temp3 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">'PAQ_J'</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>temp12 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(temp1, temp2, <span class="at">by =</span> <span class="st">"SEQN"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>temp123 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(temp12, temp3, <span class="at">by =</span> <span class="st">"SEQN"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>lab2q1 <span class="ot">&lt;-</span> temp123 <span class="sc">|&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SEQN, WTINT2YR, RIDAGEYR, HSD010, PAQ665) <span class="sc">|&gt;</span> </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RIDAGEYR <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> RIDAGEYR <span class="sc">&lt;</span> <span class="dv">50</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PAQ665 <span class="sc">&lt;</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">HSD010 =</span> <span class="fu">factor</span>(HSD010),</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">PAQ665 =</span> <span class="fu">factor</span>(PAQ665),</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">SEQN =</span> <span class="fu">as.character</span>(SEQN)) <span class="sc">|&gt;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>()</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(temp1, temp12, temp2, temp3, temp123)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(lab2q1, <span class="at">file =</span> <span class="st">"data/lab2q1.Rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="variables-studied-in-question-1" class="level2">
<h2 class="anchored" data-anchor-id="variables-studied-in-question-1">Variables Studied in Question 1</h2>
<p>The resulting variables are listed below.</p>
<table class="table">
<colgroup>
<col style="width: 11%">
<col style="width: 20%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Item</th>
<th style="text-align: center;">Description</th>
<th>Possible Responses</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>seqn</code></td>
<td style="text-align: center;">Subject id code</td>
<td>93717 through 102956</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>wtint2yr</code></td>
<td style="text-align: center;">Full sample 2 year interview weight</td>
<td>min = 4363, max = 387879</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>ridageyr</code></td>
<td style="text-align: center;">Age in years at screening</td>
<td>min = 21, max = 49</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>hsd010</code></td>
<td style="text-align: center;">General Health Condition</td>
<td>see below</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>paq665</code></td>
<td style="text-align: center;">Moderate Recreational Activities</td>
<td>see below</td>
</tr>
</tbody>
</table>
<ul>
<li><code>hsd010</code> Would you say your health in general is
<ul>
<li>1 = Excellent,</li>
<li>2 = Very Good,</li>
<li>3 = Good,</li>
<li>4 = Fair, or</li>
<li>5 = Poor?</li>
<li>(Note that 7 = Refused, 9 = Don’t know in this variable, which we will treat as missing.)</li>
</ul></li>
<li><code>paq665</code> Do you do any moderate-intensity sports, fitness, or recreational activities that cause a small increase in breathing or heart rate such as brisk walking, bicycling, swimming, or golf for at least 10 minutes continuously?
<ul>
<li>1 = Yes, 2 = No</li>
</ul></li>
</ul>
</section>
<section id="loading-the-question-1-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-question-1-data">Loading the Question 1 Data</h2>
<p>I have provided the saved <code>lab2q1.Rds</code> file to you on <a href="https://github.com/THOMASELOVE/432-data">the 432-data page</a>. I encourage you to load it using the code below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">comment =</span> <span class="cn">NA</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>lab2q1 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"https://raw.githubusercontent.com/THOMASELOVE/432-data/master/data/lab2q1.Rds"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>lab2q1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,295 × 5
   seqn  wtint2yr ridageyr hsd010 paq665
   &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt; 
 1 93717   53249.       22 2      2     
 2 93718   20257.       45 3      1     
 3 93729   11760.       42 4      2     
 4 93738   59333.       26 3      2     
 5 93746   27135.       25 2      2     
 6 93755   30922.       26 2      1     
 7 93761   18939.       44 3      2     
 8 93763  103670.       40 3      1     
 9 93766   16414.       36 4      2     
10 93774  232377.       41 &lt;NA&gt;   1     
# … with 2,285 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="question-2-25-points" class="level1">
<h1>Question 2 (25 points)</h1>
<p>Question 2 uses the <code>hbp3456</code> data.</p>
<ol type="a">
<li><p>(10 points) Does which <strong>insurance</strong> status a person has seem to have a meaningful impact on their <strong>systolic blood pressure</strong>, adjusting for whether or not they have a prescription for a <strong>beta-blocker</strong>? Decide whether your model should include an interaction term in a sensible way (providing a graph to help us understand your reasoning), and then fit your choice of model using the <code>lm</code> function in R. Display your results.</p></li>
<li><p>(15 points) Provide a written explanation of your findings, in complete sentences. Your explanation should address both the overall quality of fit and the interpretation of the coefficients of your chosen model, as well as provide a detailed description as to how you used the output you generated in part a to decide whether or not to include an interaction term.</p></li>
</ol>
<section id="question-2-hints" class="level2">
<h2 class="anchored" data-anchor-id="question-2-hints">Question 2 Hints</h2>
<ol type="1">
<li>One graph you might use would be one to assess the need for an interaction term, probably via a plot of means.</li>
<li>Another graph (or perhaps table) to consider for insight would look at the relationship between <strong>insurance</strong> and <strong>beta-blocker</strong> status in these subjects.</li>
<li>Please explicitly state in your response that you assume that the missingness you observe in these data are MCAR, and that a complete case analysis is thus appropriate for this Question.</li>
</ol>
</section>
<section id="data-for-question-2-hbp3456-data" class="level2">
<h2 class="anchored" data-anchor-id="data-for-question-2-hbp3456-data">Data for Question 2 (<code>hbp3456</code> data)</h2>
<p>The (simulated) data in the <code>hbp3456.csv</code> file describe a total of 3456 people living with hypertension (high blood pressure) diagnoses who receive primary care in one of eight practices.</p>
<ul>
<li>In each of the eight practices, 432 (different) individuals (who I’ll call subjects in what follows) were sampled at random from all eligible subjects.</li>
<li>The data are based on real electronic health record (EHR) data, but with some noise added.
<ul>
<li>The practices are named after streets that appear in <em>The Simpsons</em>.</li>
<li>There are 62 (fictional) providers identified across the eight practices, and each provider cares for subjects within a single practice.</li>
</ul></li>
</ul>
<section id="eligibility-criteria" class="level3">
<h3 class="anchored" data-anchor-id="eligibility-criteria">Eligibility Criteria</h3>
<p>The data are cross-sectional and describe results from a one-year reporting window. To be eligible for the study, a subject had to meet all of the following criteria:</p>
<ul>
<li>have an EHR-documented hypertension diagnosis which applied during the one-year reporting window,</li>
<li>cared for at one of the eight practices in this study, and by one of the 62 participating providers in this study</li>
<li>age 25 or older at the start of the one-year reporting period (note that all subjects with ages 80 and higher are listed as age 80 in the data)</li>
<li>between 1 and 12 primary care office visits in the one-year reporting period</li>
<li>between 2 and 24 primary care office visits combined across the reporting period and the previous year</li>
<li>fall into one of two biological sex categories (female or male)</li>
<li>fall into one of four primary insurance categories, specifically Medicare, Commercial, Medicaid or Uninsured.</li>
<li>have a most recent systolic BP between 80 and 220 mm Hg and most recent diastolic BP between 40 and 140 mm Hg, where the systolic BP is at least 15 and no more than 130 mm Hg larger than the diastolic BP.</li>
</ul>
</section>
<section id="codebook" class="level3">
<h3 class="anchored" data-anchor-id="codebook">Codebook</h3>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 90%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><code>record</code></td>
<td>unique code for each subject (six digits, first digit is 9, last indicates practice)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>practice</code></td>
<td>primary care practice, of which there are eight in the data</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>provider</code></td>
<td>primary care provider (each practice has multiple providers)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>age</code></td>
<td>subject’s age as of the start of the reporting period</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>race</code></td>
<td>subject’s race (4 levels: Asian, AA_Black, White, Other)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>eth_hisp</code></td>
<td>is subject of Hispanic/Latino ethnicity? Yes or No</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>sex</code></td>
<td>subject’s sex (F or M)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>insurance</code></td>
<td>subject’s primary insurance (Medicare, Commercial, Medicaid, Uninsured)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>income</code></td>
<td>estimated median income of subject’s home neighborhood (via American Community Survey, to nearest $100)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>hsgrad</code></td>
<td>estimated percentage of adults living in the subject’s home neighborhood who have graduated from high school (via American Community Survey, to the nearest tenth of a percent)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>tobacco</code></td>
<td>tobacco use status (Current, Former, or Never)</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>depr_diag</code></td>
<td>does subject have depression diagnosis? Yes or No</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>height</code></td>
<td>subject’s height in meters, rounded to two decimal places</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>weight</code></td>
<td>subject’s weight in kilograms, rounded to one decimal place</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>ldl</code></td>
<td>subject’s LDL cholesterol level, in mg/dl</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>statin</code></td>
<td>does subject have a current prescription for a statin medication? Yes or No</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>bp_med</code></td>
<td>does subject have a current prescription for a blood pressure control medication? Yes or No</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>sbp</code></td>
<td>subject’s most recently obtained systolic blood pressure, in mm Hg</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>dbp</code></td>
<td>subject’s most recently obtained diastolic blood pressure, in mm Hg</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>visits_1</code></td>
<td>subject’s number of visits for primary care in reporting period (one year)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>visits_2</code></td>
<td>subject’s visits for primary care in the past two years</td>
</tr>
<tr class="even">
<td style="text-align: right;"><code>acearb</code></td>
<td>does subject have a current prescription for an ACE-inhibitor or ARB? Yes or No</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><code>betab</code></td>
<td>does subject have a current prescription for a beta-blocker? Yes or No</td>
</tr>
</tbody>
</table>
</section>
<section id="notes-on-specific-variables" class="level3">
<h3 class="anchored" data-anchor-id="notes-on-specific-variables">Notes on Specific Variables</h3>
<ul>
<li>The list of medications included in <code>bp_med</code> is: ACE-inhibitor, ARB, Diuretic, Calcium-Channel Blocker, Beta-Blocker, Alpha-1 Blocker, Centrally acting Alpha-2 Agonist, Vasodilator or other antihypertensive agents. A subject with a current prescription for any of these will have a Yes in <code>bp_med</code>.</li>
<li>For the <code>acearb</code>, <code>betab</code>, <code>bpmed</code>, <code>statin</code> and <code>depr_diag</code> variables, a No response includes all subjects where there’s no evidence in the EHR of meeting the Yes criterion, so that there are no missing values (a missing value is interpreted there as No.)</li>
<li>For the <code>height</code>, <code>weight</code> and <code>ldl</code> results, implausible values were treated as missing in preparing the data for you.</li>
<li>The <code>race</code> and <code>eth_hisp</code> values are self-reported, and some subjects refused to answer one or both of the relevant questions.</li>
<li>The <code>income</code> and <code>hsgrad</code> values are imputed from the subject’s home address, usually at the census block level, but occasionally at the level of the zip code.
<ul>
<li>When a subject’s home address could not be geocoded, these values are noted as missing.</li>
<li>Geocoded estimates of <code>income</code> below 6500 are reported as 6500, and estimates above 130000 are reported as 130000.</li>
<li>For <code>hsgrad</code>, geocoded estimates below 40 are reported as 40, and estimates above 99.9 are reported as 99.9.</li>
</ul></li>
</ul>
</section>
</section>
<section id="loading-the-data-for-question-2" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-data-for-question-2">Loading the Data for Question 2</h2>
<p>Here’s the approach I took to load and view the <code>hbp3456</code> data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">comment =</span> <span class="cn">NA</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>hbp3456 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/THOMASELOVE/432-data/master/data/hbp3456.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">record =</span> <span class="fu">as.character</span>(record))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>hbp3456</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,456 × 23
   record practice provider   age race     eth_hisp sex   insura…¹ income hsgrad
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
 1 900018 Walnut   W_05        64 &lt;NA&gt;     &lt;NA&gt;     F     Medicare  15600   83  
 2 900024 King     K_07        74 AA_Black No       F     Medicare  16200   92.8
 3 900037 Sycamore S_06        60 AA_Black No       F     Commerc…  21400   79  
 4 900043 Highland H_07        46 White    Yes      F     Medicaid  38300   83.5
 5 900057 Sycamore S_04        59 AA_Black No       M     Commerc…  23200   78.7
 6 900062 Elm      E_03        54 AA_Black No       M     Commerc…  48600   85.5
 7 900076 Plympton P_03        74 White    No       M     Commerc…  64200   92.9
 8 900082 Elm      E_06        73 White    No       M     Medicare  48600   85.5
 9 900097 Sycamore S_10        58 AA_Black No       F     Commerc…  29900   86.2
10 900101 Center   C_01        46 AA_Black No       M     Uninsur…  63600   97.5
# … with 3,446 more rows, 13 more variables: tobacco &lt;chr&gt;, depr_diag &lt;chr&gt;,
#   height &lt;dbl&gt;, weight &lt;dbl&gt;, ldl &lt;dbl&gt;, statin &lt;chr&gt;, bp_med &lt;chr&gt;,
#   sbp &lt;dbl&gt;, dbp &lt;dbl&gt;, visits_1 &lt;dbl&gt;, visits_2 &lt;dbl&gt;, acearb &lt;chr&gt;,
#   betab &lt;chr&gt;, and abbreviated variable name ¹​insurance</code></pre>
</div>
</div>
</section>
</section>
<section id="include-the-session-information" class="level1">
<h1>Include the Session Information</h1>
<p>Please display your session information at the end of your submission, as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>xfun<span class="sc">::</span><span class="fu">session_info</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 22621)

Locale:
  LC_COLLATE=English_United States.utf8 
  LC_CTYPE=English_United States.utf8   
  LC_MONETARY=English_United States.utf8
  LC_NUMERIC=C                          
  LC_TIME=English_United States.utf8    

Package version:
  askpass_1.1         assertthat_0.2.1    backports_1.4.1    
  base64enc_0.1.3     bit_4.0.5           bit64_4.0.5        
  blob_1.2.3          broom_1.0.2         bslib_0.4.2        
  cachem_1.0.6        callr_3.7.3         cellranger_1.1.0   
  cli_3.4.1           clipr_0.8.0         colorspace_2.0-3   
  compiler_4.2.2      cpp11_0.4.3         crayon_1.5.2       
  curl_4.3.3          data.table_1.14.6   DBI_1.1.3          
  dbplyr_2.2.1        digest_0.6.31       dplyr_1.0.10       
  dtplyr_1.2.2        ellipsis_0.3.2      evaluate_0.19      
  fansi_1.0.3         farver_2.1.1        fastmap_1.1.0      
  forcats_0.5.2       fs_1.5.2            gargle_1.2.1       
  generics_0.1.3      ggplot2_3.4.0       glue_1.6.2         
  googledrive_2.0.0   googlesheets4_1.0.1 graphics_4.2.2     
  grDevices_4.2.2     grid_4.2.2          gtable_0.3.1       
  haven_2.5.1         highr_0.9           hms_1.1.2          
  htmltools_0.5.4     htmlwidgets_1.6.0   httr_1.4.4         
  ids_1.0.1           isoband_0.2.6       janitor_2.1.0      
  jquerylib_0.1.4     jsonlite_1.8.4      knitr_1.41         
  labeling_0.4.2      lattice_0.20.45     lifecycle_1.0.3    
  lubridate_1.9.0     magrittr_2.0.3      MASS_7.3.58.1      
  Matrix_1.5.3        memoise_2.0.1       methods_4.2.2      
  mgcv_1.8.41         mime_0.12           modelr_0.1.10      
  munsell_0.5.0       nlme_3.1.160        openssl_2.0.5      
  parallel_4.2.2      pillar_1.8.1        pkgconfig_2.0.3    
  prettyunits_1.1.1   processx_3.8.0      progress_1.2.2     
  ps_1.7.2            purrr_0.3.5         R6_2.5.1           
  rappdirs_0.3.3      RColorBrewer_1.1.3  readr_2.1.3        
  readxl_1.4.1        rematch_1.0.1       rematch2_2.1.2     
  reprex_2.0.2        rlang_1.0.6         rmarkdown_2.19     
  rstudioapi_0.14     rvest_1.0.3         sass_0.4.4         
  scales_1.2.1        selectr_0.4.2       snakecase_0.11.0   
  splines_4.2.2       stats_4.2.2         stringi_1.7.8      
  stringr_1.5.0       sys_3.4.1           tibble_3.1.8       
  tidyr_1.2.1         tidyselect_1.2.0    tidyverse_1.3.2    
  timechange_0.1.1    tinytex_0.43        tools_4.2.2        
  tzdb_0.3.0          utf8_1.2.2          utils_4.2.2        
  uuid_1.1.0          vctrs_0.5.1         viridisLite_0.4.1  
  vroom_1.6.0         withr_2.5.0         xfun_0.35          
  xml2_1.3.3          yaml_2.3.6         </code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>